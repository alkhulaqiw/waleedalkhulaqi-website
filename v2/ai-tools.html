<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>أدوات الذكاء الاصطناعي — وليد الخلاقي</title>
  <meta name="description" content="مولد نصوص، توليد صور، تحويل صوت إلى نص والعكس." />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50">
  <div class="max-w-4xl mx-auto p-6">
    <a href="index.html" class="text-sm text-blue-600">← العودة</a>
    <h1 class="text-2xl font-bold mt-4">أدوات الذكاء الاصطناعي</h1>

    <!-- مولد نصوص (نموذج محلي بسيط — يمكنك ربط API لاحقًا) -->
    <section class="mt-6 bg-white p-4 rounded shadow">
      <h2 class="font-semibold">مولد نصوص (نسخة تجريبية)</h2>
      <p class="text-slate-600 text-sm mt-1">أدخل موضوعاً موجزاً، واضغط "توليد". (يمكن ربط هذا النموذج لاحقًا بـ OpenAI/HuggingFace عندما توفر مفتاح API)</p>
      <textarea id="prompt" rows="3" class="w-full mt-2 border rounded p-2" placeholder="اكتب هنا موضوع التوليد..."></textarea>
      <div class="mt-2 flex gap-2">
        <button id="generate" class="px-4 py-2 bg-slate-900 text-white rounded">توليد</button>
        <button id="clear" class="px-4 py-2 border rounded">مسح</button>
      </div>
      <pre id="output" class="mt-3 p-3 bg-slate-100 rounded text-slate-800 max-h-48 overflow-auto"></pre>
    </section>

    <!-- توليد صورة (مؤقت: يستخدم صوراً مولّدة من picsum كعينة) -->
    <section class="mt-6 bg-white p-4 rounded shadow">
      <h2 class="font-semibold">مولد صور (نموذج مؤقت)</h2>
      <p class="text-slate-600 text-sm mt-1">أدخل وصفًا وسيُعرض مثال لصورة. لاحقًا يمكن توصيل Replicate / Stable Diffusion عبر API.</p>
      <input id="imgPrompt" class="w-full border rounded p-2" placeholder="وصف الصورة..." />
      <div class="mt-2">
        <button id="imgGenerate" class="px-4 py-2 bg-slate-900 text-white rounded">عرض صورة</button>
      </div>
      <div id="imgResult" class="mt-3"></div>
    </section>

    <!-- تحويل كلام إلى نص -->
    <section class="mt-6 bg-white p-4 rounded shadow">
      <h2 class="font-semibold">تحويل الكلام إلى نص</h2>
      <p class="text-slate-600 text-sm">اضغط زر البدء ثم تحدث (يعمل في المتصفحات التي تدعم Web Speech API).</p>
      <div class="mt-2 flex gap-2">
        <button id="startRec" class="px-4 py-2 bg-emerald-600 text-white rounded">ابدأ التسجيل</button>
        <button id="stopRec" class="px-4 py-2 border rounded">أوقف</button>
      </div>
      <textarea id="speechResult" rows="4" class="w-full mt-2 border rounded p-2" placeholder="النص المحول سيظهر هنا"></textarea>
    </section>

    <!-- تحويل نص إلى صوت -->
    <section class="mt-6 bg-white p-4 rounded shadow">
      <h2 class="font-semibold">تحويل نص إلى صوت</h2>
      <textarea id="ttsText" rows="3" class="w-full mt-2 border rounded p-2" placeholder="اكتب نصًا لتحويله إلى صوت"></textarea>
      <div class="mt-2">
        <button id="speakBtn" class="px-4 py-2 bg-blue-600 text-white rounded">تشغيل الصوت</button>
      </div>
    </section>
  </div>

  <script>
  // بسيط: مولد نصوص محلي (placeholder) — يمكنك استبداله باستدعاء API لاحقاً
  document.getElementById('generate').addEventListener('click', () => {
    const p = document.getElementById('prompt').value.trim();
    const out = document.getElementById('output');
    if(!p){ out.textContent = 'أدخل موضوعًا لبدء التوليد.'; return; }
    // توليد نص تجريبي بسيط: قالب مجرد لعرض الفكرة
    out.textContent = `مقدمة عن "${p}"\n\nهذا نص تجريبي مولَّد لتوضيح واجهة التوليد. عند ربط API حقيقي سيُستبدل هذا بالمحتوى الناتج عن نموذج الذكاء الاصطناعي.\n\nخاتمة قصيرة حول ${p}.`;
  });
  document.getElementById('clear').addEventListener('click', () => {
    document.getElementById('prompt').value = '';
    document.getElementById('output').textContent = '';
  });

  // صورة مؤقتة باستخدام picsum (مثال). لإضافة دعم Stable Diffusion/Replicate، استبدل مع endpoint المطلوب.
  document.getElementById('imgGenerate').addEventListener('click', () => {
    const desc = document.getElementById('imgPrompt').value.trim() || 'random';
    const container = document.getElementById('imgResult');
    container.innerHTML = `<img src="https://picsum.photos/seed/${encodeURIComponent(desc)}/600/360" alt="generated" class="rounded shadow" />`;
  });

  // Web Speech API: تحويل كلام إلى نص
  let recognition;
  if('webkitSpeechRecognition' in window || 'SpeechRecognition' in window){
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new SpeechRecognition();
    recognition.lang = 'ar-SA';
    recognition.interimResults = false;
    recognition.continuous = false;

    recognition.onresult = (event) => {
      const text = Array.from(event.results).map(r => r[0].transcript).join('');
      document.getElementById('speechResult').value += text;
    };
    recognition.onerror = (e) => { console.error(e); alert('حدث خطأ أثناء التعرف على الصوت.'); };
  } else {
    document.getElementById('startRec').disabled = true;
    document.getElementById('stopRec').disabled = true;
    document.getElementById('speechResult').placeholder = 'المتصفح لا يدعم Web Speech API.';
  }

  document.getElementById('startRec').addEventListener('click', () => {
    if(recognition) recognition.start();
  });
  document.getElementById('stopRec').addEventListener('click', () => {
    if(recognition) recognition.stop();
  });

  // Text-to-Speech
  document.getElementById('speakBtn').addEventListener('click', () => {
    const text = document.getElementById('ttsText').value.trim();
    if(!text) return alert('اكتب نصًا لتشغيله صوتياً.');
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = 'ar-SA';
    speechSynthesis.speak(utter);
  });
  </script>
</body>
</html>
